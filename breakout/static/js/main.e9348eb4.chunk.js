(window.webpackJsonpbreakout=window.webpackJsonpbreakout||[]).push([[0],{14:function(e,t,i){e.exports=i(21)},21:function(e,t,i){"use strict";i.r(t);var n,r,a=i(0),o=i.n(a),l=i(7),c=i.n(l),s=i(8),u=i(9),d=i(12),h=i(10),p=i(2),f=i(13),y=Math.PI/180,b=10,v=.02,g=12,w=.9,O=40,m=10,k=.9,j=1.02,S=.5;function P(){if(!n){var e=0;e=window.innerHeight>window.innerWidth?window.innerWidth*w:window.innerHeight*w;var t=window.innerWidth/2-e/2,i=window.innerHeight/2-e/2;n={left:t,top:i,size:e,blockHeight:e/(2*g),blockWidth:e/g}}return n}!function(e){e[e.initialize=0]="initialize",e[e.hitBlock=1]="hitBlock",e[e.paddleMove=2]="paddleMove",e[e.tick=3]="tick",e[e.ballBounceHorizantally=4]="ballBounceHorizantally",e[e.ballBounceVertically=5]="ballBounceVertically",e[e.gameLost=6]="gameLost",e[e.nextLevel=7]="nextLevel"}(r||(r={}));var z=function(){for(var e=[],t=0,i=0;i<5;i++){t++;for(var n=0;n<g;n++){var r={color:t%2===0?"red":"blue",x:n,y:i,left:0,top:0,height:0,width:0,hit:!1};t++,e.push(r)}}return e},M=function(e,t){var i=Math.ceil(e.left),n=Math.floor(e.left+e.width),r=Math.ceil(e.top),a=Math.floor(e.top+e.height),o=Math.ceil(t.left),l=Math.floor(t.left+t.width),c=Math.ceil(t.top),s=Math.floor(t.top+t.height);return!(a<c||r>s)&&!(l<i||o>n)},E=function(){var e=10*Math.random();return Math.random()>=.5?e:-1*e},H=function(e,t){var i=t.left,n=t.left+t.width,a=t.top,o=t.top+t.height,l=e.left,c=e.left+e.width,s=e.top,u=e.top+e.height,d=c>i&&l<n,h=u>a&&s<o,p=function(e){var t=[],i=D(e,10,0),n=x(e,10,0);i>0&&t.push("right");i<0&&t.push("left");n>0&&t.push("down");n<0&&t.push("up");return t}(e.angle),f=p.some(function(e){return"left"===e}),y=p.some(function(e){return"right"===e}),b=p.some(function(e){return"up"===e}),v=p.some(function(e){return"down"===e});return b&&s<o&&d?r.ballBounceHorizantally:v&&u>a&&d?r.ballBounceHorizantally:f&&c>n&&h?r.ballBounceVertically:y&&l<i&&h?r.ballBounceVertically:(console.log("Failed hit detection"),r.ballBounceHorizantally)},B=function(e,t){return 40*(.5-Math.abs(e.left-t.left)/t.width)*-1};function x(e,t,i){return Math.sin(e*y*-1)*t+i}function D(e,t,i){return Math.cos(e*y*-1)*t+i}var W=i(3),L=i(1);function A(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function C(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?A(i,!0).forEach(function(t){Object(L.a)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):A(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var F={isPaddle:function(e){return e&&e.isPaddle}};function V(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function q(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?V(i,!0).forEach(function(t){Object(L.a)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):V(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var R=P();var I=i(5);function J(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var G=P();function U(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var X=P();var K={blocks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.initialize:case r.nextLevel:var i=z();return i.forEach(function(e){e.height=G.blockHeight,e.width=G.blockWidth,e.left=e.x*G.blockWidth,e.top=e.y*G.blockHeight}),i;case r.hitBlock:if(t.payload){var n=Object(I.a)(e);return n[e.indexOf(t.payload)].hit=!0,n}return e;case r.tick:var a=e.map(function(e,t){return!0===e.hit?{block:e,index:t}:void 0});if(a.length>0){var o=Object(I.a)(e),l=.1*G.blockHeight,c=l/2;return a.forEach(function(e){if(e){var t=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?J(i,!0).forEach(function(t){Object(L.a)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):J(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},e.block);t.height-=l,t.width-=l,t.left+=c,t.top+=c,t.height<=0||t.width<=0?o.splice(e.index,1):o[e.index]=t}}),o}return e;default:return e}},paddle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isPaddle:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.initialize:var i=X.size/O,n=X.size/m,a=X.size/2-n/2;return{color:"white",width:n,top:X.size*k,left:a,height:i,isPaddle:!0};case r.paddleMove:var o;return"undefined"!==typeof t.payload?(o=t.payload-e.width/2<=0?0:t.payload-e.width/2>=X.size-e.width?X.size-e.width:t.payload-e.width/2,e.left===o?e:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?U(i,!0).forEach(function(t){Object(L.a)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):U(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},e,{left:o})):e;default:return e}},ball:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r.initialize:return{angle:90+E(),color:"yellow",height:R.size*v,width:R.size*v,left:R.size/2-R.size*v/2,top:R.size/2-R.size*v/2,velocity:b,lastObject:{}};case r.tick:return q({},e,{left:D(e.angle,e.velocity,e.left),top:x(e.angle,e.velocity,e.top)});case r.ballBounceHorizantally:case r.ballBounceVertically:if(t.payload&&t.payload!==e.lastObject){var i=e.angle,n=1;return t.type===r.ballBounceHorizantally?(F.isPaddle(t.payload)&&(n=B(e,t.payload)),i=-1*(i+n)):t.payload&&t.payload!==e.lastObject&&(i=180-i),q({},e,{angle:i,lastObject:t.payload})}return e;case r.hitBlock:return q({},e,{velocity:e.velocity*j});case r.nextLevel:return q({},e,{velocity:e.velocity+S});default:return e}},gameState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch((arguments.length>1?arguments[1]:void 0).type){case r.initialize:return{gameMode:"running",level:1,score:0};case r.gameLost:return C({},e,{gameMode:"ended"});case r.nextLevel:return C({},e,{level:e.level+1});case r.hitBlock:return C({},e,{score:e.score+1});default:return e}}},N=Object(W.a)(K),Q=Object(W.b)(N);function T(){return Q}function Y(){return T().getState()}var Z={leftWall:{},rightWall:{},topWall:{},bottomWall:{}},$=P(),_=function(e){function t(e){var i;return Object(s.a)(this,t),(i=Object(d.a)(this,Object(h.a)(t).call(this,e))).tickHandler=void 0,i.tickStart=void 0,i.subscription=void 0,i.onMouseMove=i.onMouseMove.bind(Object(p.a)(i)),i.tick=i.tick.bind(Object(p.a)(i)),i.onPlayAgain=i.onPlayAgain.bind(Object(p.a)(i)),i.state=Y(),i}return Object(f.a)(t,e),Object(u.a)(t,[{key:"onMouseMove",value:function(e){if(e){var t=e.clientX-$.left;T().dispatch({type:r.paddleMove,payload:t})}}},{key:"onPlayAgain",value:function(){T().dispatch({type:r.initialize}),this.tickHandler=this.tickHandler=window.requestAnimationFrame(this.tick)}},{key:"tick",value:function(e){if(this.tickStart||(this.tickStart=e),"ended"!==this.state.gameState.gameMode){if(e-this.tickStart>1e3/60){var t=Y().ball,i=Y().blocks,n=Y().paddle;if(0===i.length&&T().dispatch({type:r.nextLevel}),M(t,n)){var a=H(t,n);T().dispatch({type:a,payload:n})}else if(i){var o=i.find(function(e){return M(t,e)&&!1===e.hit});if(o){T().dispatch({type:r.hitBlock,payload:o});var l=H(t,o);"undefined"!==typeof l&&T().dispatch({type:l,payload:o})}else t.top<=0?T().dispatch({type:r.ballBounceHorizantally,payload:Z.topWall}):t.left<=0?T().dispatch({type:r.ballBounceVertically,payload:Z.leftWall}):t.left+t.width>=$.size?T().dispatch({type:r.ballBounceVertically,payload:Z.rightWall}):t.top+t.width>=$.size&&T().dispatch({type:r.gameLost})}T().dispatch({type:r.tick}),this.syncStateWithRedux(),this.tickStart=e}this.tickHandler=window.requestAnimationFrame(this.tick)}}},{key:"componentDidMount",value:function(){var e=this;T().dispatch({type:r.initialize}),this.tickHandler=this.tickHandler=window.requestAnimationFrame(this.tick),window.addEventListener("mousemove",this.onMouseMove),this.subscription=T().subscribe(function(){var t=Y();t.gameState!==e.state.gameState&&(e.setState({gameState:t.gameState}),"ended"===t.gameState.gameMode&&e.tickHandler&&window.cancelAnimationFrame(e.tickHandler))})}},{key:"componentWillUnmount",value:function(){this.tickHandler&&window.cancelAnimationFrame(this.tickHandler),window.removeEventListener("mousemove",this.onMouseMove),this.subscription&&(this.subscription(),delete this.subscription)}},{key:"gameFieldStyle",value:function(){return{position:"absolute",left:$.left,top:$.top,width:$.size,height:$.size,borderColor:"white",borderStyle:"solid",display:"flex",justifyContent:"center"}}},{key:"gameScorebarStyle",value:function(){return{position:"absolute",left:$.left,width:$.size,top:$.top-25,height:22,borderColor:"white",borderStyle:"solid",display:"flex",flexDirection:"row"}}},{key:"positionStyle",value:function(e){return{position:"absolute",left:e.left,top:e.top,height:e.height,width:e.width,backgroundColor:e.color}}},{key:"ballStyle",value:function(e){var t=this.positionStyle(e);return t.borderRadius="50%",t}},{key:"syncStateWithRedux",value:function(){var e=this,t=Y(),i={};Object.keys(t).forEach(function(n){var r=e.state[n],a=t[n];r!==a&&(i[n]=a)}),Object.keys(i).length>0&&this.setState(i)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("div",{style:this.gameScorebarStyle()},o.a.createElement("div",{key:1,style:{color:"white",justifyContent:"center",marginLeft:"10px"}},"Level: ",this.state.gameState.level),">",o.a.createElement("div",{key:2,style:{color:"white",justifyContent:"center"}},"Score: ",this.state.gameState.score),">"),o.a.createElement("div",null,this.state.blocks&&this.state.paddle&&this.state.ball?o.a.createElement("div",{style:this.gameFieldStyle()},this.state.blocks.map(function(t,i){return o.a.createElement("div",{key:i,style:e.positionStyle(t)})}),o.a.createElement("div",{style:this.positionStyle(this.state.paddle)}),o.a.createElement("div",{style:this.ballStyle(this.state.ball)}),"ended"===this.state.gameState.gameMode?o.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"}},o.a.createElement("p",{style:{alignSelf:"center",color:"white"}},"Game over"),o.a.createElement("button",{onClick:this.onPlayAgain,style:{alignSelf:"center"}},"Play again")):null):null))}}]),t}(o.a.Component);c.a.render(o.a.createElement(_,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.e9348eb4.chunk.js.map