(window.webpackJsonpbreakout=window.webpackJsonpbreakout||[]).push([[0],{14:function(e,t,n){e.exports=n(21)},21:function(e,t,n){"use strict";n.r(t);var r,o,i=n(0),a=n.n(i),l=n(7),c=n.n(l),s=n(8),u=n(9),d=n(12),h=n(10),p=n(2),f=n(13),y=Math.PI/180,b=function(){if(!r){var e=0;e=window.innerHeight>window.innerWidth?.9*window.innerWidth:.9*window.innerHeight;var t=window.innerWidth/2-e/2,n=window.innerHeight/2-e/2;r={left:t,top:n,size:e}}return r};!function(e){e[e.reset=0]="reset",e[e.hitBlock=1]="hitBlock",e[e.paddleMove=2]="paddleMove",e[e.tick=3]="tick",e[e.ballBounceHorizantally=4]="ballBounceHorizantally",e[e.ballBounceVertically=5]="ballBounceVertically",e[e.gameLost=6]="gameLost",e[e.nextLevel=7]="nextLevel"}(o||(o={}));var v=function(e,t){for(var n=[],r=0;r<e;r++)for(var o=0;o<t;o++){var i=Math.ceil(70*Math.random()),a=Math.ceil(200*Math.random()),l=Math.random();l<.5&&(l=1);var c={color:"rgba(".concat(i,", ").concat(a,", 120, ").concat(l,")"),x:o,y:r,left:0,top:0,height:0,width:0,hit:!1};n.push(c)}return n},g=function(e,t){var n=Math.ceil(e.left),r=Math.floor(e.left+e.width),o=Math.ceil(e.top),i=Math.floor(e.top+e.height),a=Math.ceil(t.left),l=Math.floor(t.left+t.width),c=Math.ceil(t.top),s=Math.floor(t.top+t.height);return!(i<c||o>s)&&!(l<n||a>r)},w=function(e,t){var n=m(e,t);return"left"===n||"right"===n?o.ballBounceVertically:"top"===n||"bottom"===n?o.ballBounceHorizantally:(console.log("Failed hit detection"),o.ballBounceHorizantally)},m=function(e,t){var n=t.left,r=t.left+t.width,o=t.top,i=t.top+t.height,a=e.left,l=e.left+e.width,c=e.top,s=e.top+e.height>o&&c<i,u=l>n&&a<r,d=S(e.angle),h=d.some(function(e){return"left"===e}),p=d.some(function(e){return"right"===e}),f=d.some(function(e){return"up"===e}),y=d.some(function(e){return"down"===e});return f&&u?"bottom":y&&u?"top":h&&s?"right":p&&s?"left":void 0},O=function(e,t){return 40*(.5-Math.abs(e.left-t.left)/t.width)*-1},k=function(e,t,n){return Math.sin(e*y*-1)*t+n},j=function(e,t,n){return Math.cos(e*y*-1)*t+n},S=function(e){var t=[],n=j(e,10,0),r=k(e,10,0);return n>0&&t.push("right"),n<0&&t.push("left"),r>0&&t.push("down"),r<0&&t.push("up"),t},M=n(3),P=n(1),E=function(e){return e&&e.isPaddle};function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(n,!0).forEach(function(t){Object(P.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var H=b(),x=function(){return.02*H.size},D=function(){return H.size/2-.02*H.size/2},L=function(){return{angle:90+function(){var e=10*Math.random();return Math.random()>=.5?e:-1*e}(),color:"radial-gradient(yellow, orange, brown)",height:x(),width:x(),left:D(),top:D(),velocity:10,lastObject:{}}},W=n(5);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(n,!0).forEach(function(t){Object(P.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=v(e,t),r=K(t),o=V(t);return n.forEach(function(e){e.width=r,e.height=o,e.left=e.x*r,e.top=e.y*o}),{blocks:n,columns:t,rows:e,height:o,width:r}};function V(e){return K(e)/2}function K(e){return b().size/e}function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(n,!0).forEach(function(t){Object(P.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var I=function(){return{gameMode:"running",level:1,score:0}};function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(n,!0).forEach(function(t){Object(P.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var R=b(),X=function(){return{color:"#8b25ae",width:R.size/10,height:R.size/40,top:.9*R.size,left:R.size/2-R.size/10/2,isPaddle:!0}},N={blockState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.reset:return F();case o.nextLevel:if(e.rows<=10){var n=F(e.rows+1,e.columns+1);return n}return F(e.rows,e.columns);case o.hitBlock:if(t.payload&&t.payload){var r=Object(W.a)(e.blocks),i=r.indexOf(t.payload);return r[i].hit=!0,C({},e,{blocks:r})}return e;case o.tick:var a=e.blocks.filter(function(e){return!0===e.hit});if(a.length>0){var l=.1*K(e.columns),c=.1*V(e.rows),s=Object(W.a)(e.blocks);return a.forEach(function(e){e.width-=l,e.height-=c,e.top+=c/2,e.left+=l/2;var t=s.indexOf(e);(e.height<=0||e.width<=0)&&s.splice(t,1)}),C({},e,{blocks:s})}return e;default:return e}},paddle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.reset:return X();case o.paddleMove:if("undefined"!==typeof t.payload){var n;if(n=t.payload-e.width/2<=0?0:t.payload-e.width/2>=R.size-e.width?R.size-e.width:t.payload-e.width/2,e.left===n)return e;var r=G({},e,{left:n});return r}return e;case o.nextLevel:var i=G({},e);return i.width*=.95,i.width<R.size/10/2?e:i;default:return e}},ball:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.reset:return L();case o.tick:var n=j(e.angle,e.velocity,e.left),r=k(e.angle,e.velocity,e.top);return B({},e,{left:n,top:r});case o.ballBounceHorizantally:case o.ballBounceVertically:if(t.payload&&t.payload!==e.lastObject){var i=e.angle,a=1;return t.type===o.ballBounceHorizantally?(E(t.payload)&&(a=O(e,t.payload)),i=-1*(i+a)):t.payload&&t.payload!==e.lastObject&&(i=180-i),B({},e,{angle:i,lastObject:t.payload})}return e;case o.hitBlock:return B({},e,{velocity:1.02*e.velocity});case o.nextLevel:return B({},e,{velocity:e.velocity+.5});default:return e}},gameState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.reset:return I();case o.gameLost:return q({},e,{gameMode:"ended"});case o.nextLevel:return q({},e,{level:e.level+1});case o.hitBlock:return q({},e,{score:e.score+1});default:return e}}},Q=Object(M.a)(N),T=Object(M.b)(Q),Y=function(){return T},Z=function(){return Y().getState()},$={leftWall:{},rightWall:{},topWall:{},bottomWall:{}},_=b(),ee=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).tickHandler=void 0,n.tickStart=void 0,n.subscription=void 0,n.onMouseMove=n.onMouseMove.bind(Object(p.a)(n)),n.tick=n.tick.bind(Object(p.a)(n)),n.onPlayAgain=n.onPlayAgain.bind(Object(p.a)(n)),n.onKeyUp=n.onKeyUp.bind(Object(p.a)(n)),n.state=Z(),n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.tickHandler=this.tickHandler=window.requestAnimationFrame(this.tick),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("keyup",this.onKeyUp),this.subscription=Y().subscribe(function(){var t=Z();t.gameState!==e.state.gameState&&(e.setState({gameState:t.gameState}),"ended"===t.gameState.gameMode&&e.tickHandler&&window.cancelAnimationFrame(e.tickHandler))})}},{key:"componentWillUnmount",value:function(){this.tickHandler&&window.cancelAnimationFrame(this.tickHandler),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mousemove",this.onMouseMove),this.subscription&&(this.subscription(),delete this.subscription)}},{key:"onKeyUp",value:function(e){"KeyW"===e.code&&Y().dispatch({type:o.nextLevel})}},{key:"onMouseMove",value:function(e){if(e){var t=e.clientX-_.left;Y().dispatch({type:o.paddleMove,payload:t})}}},{key:"onPlayAgain",value:function(){Y().dispatch({type:o.reset}),this.tickHandler=this.tickHandler=window.requestAnimationFrame(this.tick)}},{key:"tick",value:function(e){if(this.tickStart||(this.tickStart=e),"ended"!==this.state.gameState.gameMode){if(e-this.tickStart>1e3/60){var t=Z().ball,n=Z().blockState.blocks,r=Z().paddle;if(0===n.length&&Y().dispatch({type:o.nextLevel}),g(t,r)){var i=w(t,r);Y().dispatch({type:i,payload:r})}else if(n){var a=n.find(function(e){return g(t,e)&&!1===e.hit});if(a){Y().dispatch({type:o.hitBlock,payload:a});var l=w(t,a);"undefined"!==typeof l&&Y().dispatch({type:l,payload:a})}else t.top<=0?Y().dispatch({type:o.ballBounceHorizantally,payload:$.topWall}):t.left<=0?Y().dispatch({type:o.ballBounceVertically,payload:$.leftWall}):t.left+t.width>=_.size?Y().dispatch({type:o.ballBounceVertically,payload:$.rightWall}):t.top+t.width>=_.size&&Y().dispatch({type:o.gameLost})}Y().dispatch({type:o.tick});var c=function(e,t){var n={};return Object.keys(e).forEach(function(r){var o=t[r],i=e[r];o!==i&&(n[r]=i)}),Object.keys(n).length>0?n:void 0}(Z(),this.state);c&&this.setState(c),this.tickStart=e}this.tickHandler=window.requestAnimationFrame(this.tick)}}},{key:"gameFieldStyle",value:function(){return{position:"absolute",left:b().left,top:b().top,width:b().size,height:b().size,borderColor:"#2c1145",borderStyle:"solid",display:"flex",justifyContent:"center"}}},{key:"gameScorebarStyle",value:function(){return{position:"absolute",left:b().left,width:b().size,top:b().top-25,height:22,borderColor:"#2c1145",borderStyle:"solid",display:"flex",flexDirection:"row"}}},{key:"positionStyle",value:function(e){return{position:"absolute",left:e.left,top:e.top,height:e.height,width:e.width,backgroundColor:e.color}}},{key:"ballStyle",value:function(e){var t=this.positionStyle(e);return t.borderRadius="50%",t.backgroundImage=e.color,t}},{key:"render",value:function(){var e=this;return a.a.createElement("div",null,a.a.createElement("div",{style:this.gameScorebarStyle()},a.a.createElement("div",{key:1,style:{color:"white",justifyContent:"center",marginLeft:"10px"}},"Level: ",this.state.gameState.level),">",a.a.createElement("div",{key:2,style:{color:"white",justifyContent:"center"}},"Score: ",this.state.gameState.score),">"),a.a.createElement("div",null,this.state.blockState&&this.state.paddle&&this.state.ball?a.a.createElement("div",{style:this.gameFieldStyle()},this.state.blockState.blocks.map(function(t,n){return a.a.createElement("div",{key:n,style:e.positionStyle(t)})}),a.a.createElement("div",{style:this.positionStyle(this.state.paddle)}),a.a.createElement("div",{style:this.ballStyle(this.state.ball)}),"ended"===this.state.gameState.gameMode?a.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"}},a.a.createElement("p",{style:{alignSelf:"center",color:"white"}},"Game over"),a.a.createElement("button",{onClick:this.onPlayAgain,style:{alignSelf:"center"}},"Play again")):null):null))}}]),t}(a.a.Component);c.a.render(a.a.createElement(ee,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.58faff77.chunk.js.map