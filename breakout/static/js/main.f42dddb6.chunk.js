(window.webpackJsonpbreakout=window.webpackJsonpbreakout||[]).push([[0],{13:function(e,t,i){e.exports=i(20)},20:function(e,t,i){"use strict";i.r(t);var n,a,o=i(0),l=i.n(o),r=i(6),c=i.n(r),s=i(7),u=i(8),d=i(11),h=i(9),p=i(2),f=i(12),y=Math.PI/180,b=10,v=.02,g=12,w=.9,m=40,k=10,O=.9,j=1.02,S=.5;function M(){if(!n){var e=0;e=window.innerHeight>window.innerWidth?window.innerWidth*w:window.innerHeight*w;var t=window.innerWidth/2-e/2,i=window.innerHeight/2-e/2;n={left:t,top:i,size:e,blockHeight:e/(2*g),blockWidth:e/g}}return n}!function(e){e[e.initialize=0]="initialize",e[e.hitBlock=1]="hitBlock",e[e.paddleMove=2]="paddleMove",e[e.tick=3]="tick",e[e.ballBounceHorizantally=4]="ballBounceHorizantally",e[e.ballBounceVertically=5]="ballBounceVertically",e[e.gameLost=6]="gameLost",e[e.nextLevel=7]="nextLevel"}(a||(a={}));var P=function(){for(var e=[],t=0,i=0;i<5;i++){t++;for(var n=0;n<g;n++){var a={color:t%2===0?"red":"blue",x:n,y:i,left:0,top:0,height:0,width:0};t++,e.push(a)}}return e},z=function(e,t){var i=Math.ceil(e.left),n=Math.floor(e.left+e.width),a=Math.ceil(e.top),o=Math.floor(e.top+e.height),l=Math.ceil(t.left),r=Math.floor(t.left+t.width),c=Math.ceil(t.top),s=Math.floor(t.top+t.height);return!(o<c||a>s)&&!(r<i||l>n)},H=function(){var e=10*Math.random();return Math.random()>=.5?e:-1*e},B=function(e,t){var i=t.left,n=t.left+t.width,o=t.top,l=t.top+t.height,r=e.left+e.width/2,c=e.top+e.height/2,s=e.left,u=e.left+e.width,d=e.top,h=e.top+e.height,p=s>i||u<n,f=d>o||h<l,y=function(e){var t=[],i=D(e,10,0),n=x(e,10,0);i>0&&t.push("right");i<0&&t.push("left");n>0&&t.push("down");n<0&&t.push("up");return t}(e.angle),b=y.some(function(e){return"left"===e}),v=y.some(function(e){return"right"===e}),g=y.some(function(e){return"up"===e}),w=y.some(function(e){return"down"===e});return g&&c>l&&f?a.ballBounceHorizantally:w&&c<o&&f?a.ballBounceHorizantally:b&&r>n&&p?a.ballBounceVertically:v&&r<i&&p?a.ballBounceVertically:(console.log("Failed hit detection"),a.ballBounceHorizantally)},E=function(e,t){return 40*(.5-Math.abs(e.left-t.left)/t.width)*-1};function x(e,t,i){return Math.sin(e*y*-1)*t+i}function D(e,t,i){return Math.cos(e*y*-1)*t+i}var L=i(3),W=i(1);function A(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function C(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?A(i,!0).forEach(function(t){Object(W.a)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):A(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var F={isPaddle:function(e){return e&&e.isPaddle}};function V(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function q(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?V(i,!0).forEach(function(t){Object(W.a)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):V(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var I=M();var J=M();function G(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var R=M();var U={blocks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.initialize:case a.nextLevel:var i=P();return i.forEach(function(e){e.height=J.blockHeight,e.width=J.blockWidth,e.left=e.x*J.blockWidth,e.top=e.y*J.blockHeight}),i;case a.hitBlock:return e.filter(function(e){return e!==t.payload});default:return e}},paddle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isPaddle:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.initialize:var i=R.size/m,n=R.size/k,o=R.size/2-n/2;return{color:"white",width:n,top:R.size*O,left:o,height:i,isPaddle:!0};case a.paddleMove:var l;return"undefined"!==typeof t.payload?(l=t.payload-e.width/2<=0?0:t.payload-e.width/2>=R.size-e.width?R.size-e.width:t.payload-e.width/2,e.left===l?e:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?G(i,!0).forEach(function(t){Object(W.a)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):G(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},e,{left:l})):e;default:return e}},ball:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.initialize:return{angle:90+H(),color:"yellow",height:I.size*v,width:I.size*v,left:I.size/2-I.size*v/2,top:I.size/2-I.size*v/2,velocity:b,lastObject:{}};case a.tick:return q({},e,{left:D(e.angle,e.velocity,e.left),top:x(e.angle,e.velocity,e.top)});case a.ballBounceHorizantally:case a.ballBounceVertically:if(t.payload&&t.payload!==e.lastObject){var i=e.angle,n=1;return t.type===a.ballBounceHorizantally?(F.isPaddle(t.payload)&&(n=E(e,t.payload)),i=-1*(i+n)):t.payload&&t.payload!==e.lastObject&&(i=180-i),q({},e,{angle:i,lastObject:t.payload})}return e;case a.hitBlock:return q({},e,{velocity:e.velocity*j});case a.nextLevel:return q({},e,{velocity:e.velocity+S});default:return e}},gameState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch((arguments.length>1?arguments[1]:void 0).type){case a.initialize:return{gameMode:"running",level:1,score:0};case a.gameLost:return C({},e,{gameMode:"ended"});case a.nextLevel:return C({},e,{level:e.level+1});case a.hitBlock:return C({},e,{score:e.score+1});default:return e}}},X=Object(L.a)(U),K=Object(L.b)(X);function N(){return K}function Q(){return N().getState()}var T={leftWall:{},rightWall:{},topWall:{},bottomWall:{}},Y=M(),Z=function(e){function t(e){var i;return Object(s.a)(this,t),(i=Object(d.a)(this,Object(h.a)(t).call(this,e))).tickHandler=void 0,i.tickStart=void 0,i.subscription=void 0,i.onMouseMove=i.onMouseMove.bind(Object(p.a)(i)),i.tick=i.tick.bind(Object(p.a)(i)),i.onPlayAgain=i.onPlayAgain.bind(Object(p.a)(i)),i.state={gameState:{gameMode:"running",level:1,score:0}},i}return Object(f.a)(t,e),Object(u.a)(t,[{key:"onMouseMove",value:function(e){if(e){var t=e.clientX-Y.left;N().dispatch({type:a.paddleMove,payload:t})}}},{key:"onPlayAgain",value:function(){N().dispatch({type:a.initialize}),this.tickHandler=this.tickHandler=window.requestAnimationFrame(this.tick)}},{key:"tick",value:function(e){if(this.tickStart||(this.tickStart=e),"ended"!==this.state.gameState.gameMode){if(e-this.tickStart>1e3/60){var t=Q().ball,i=Q().blocks,n=Q().paddle;if(0===i.length&&N().dispatch({type:a.nextLevel}),z(t,n)){var o=B(t,n);N().dispatch({type:o,payload:n})}else if(i){var l=i.find(function(e){return z(t,e)});if(l){N().dispatch({type:a.hitBlock,payload:l});var r=B(t,l);"undefined"!==typeof r&&N().dispatch({type:r,payload:l})}else t.top<=0?N().dispatch({type:a.ballBounceHorizantally,payload:T.topWall}):t.left<=0?N().dispatch({type:a.ballBounceVertically,payload:T.leftWall}):t.left+t.width>=Y.size?N().dispatch({type:a.ballBounceVertically,payload:T.rightWall}):t.top+t.width>=Y.size&&N().dispatch({type:a.gameLost})}N().dispatch({type:a.tick}),this.setState({ball:Q().ball,blocks:Q().blocks,paddle:Q().paddle}),this.tickStart=e}this.tickHandler=window.requestAnimationFrame(this.tick)}}},{key:"componentDidMount",value:function(){var e=this;N().dispatch({type:a.initialize}),this.tickHandler=this.tickHandler=window.requestAnimationFrame(this.tick),window.addEventListener("mousemove",this.onMouseMove),this.subscription=N().subscribe(function(){var t=Q();t.gameState!==e.state.gameState&&(e.setState({gameState:t.gameState}),"ended"===t.gameState.gameMode&&e.tickHandler&&window.cancelAnimationFrame(e.tickHandler))})}},{key:"componentWillUnmount",value:function(){this.tickHandler&&window.cancelAnimationFrame(this.tickHandler),window.removeEventListener("mousemove",this.onMouseMove),this.subscription&&(this.subscription(),delete this.subscription)}},{key:"gameFieldStyle",value:function(){return{position:"absolute",left:Y.left,top:Y.top,width:Y.size,height:Y.size,borderColor:"white",borderStyle:"solid",display:"flex",justifyContent:"center"}}},{key:"gameScorebarStyle",value:function(){return{position:"absolute",left:Y.left,width:Y.size,top:Y.top-25,height:22,borderColor:"white",borderStyle:"solid",display:"flex",flexDirection:"row"}}},{key:"positionStyle",value:function(e){return{position:"absolute",left:e.left,top:e.top,height:e.height,width:e.width,backgroundColor:e.color}}},{key:"ballStyle",value:function(e){var t=this.positionStyle(e);return t.borderRadius="50%",t}},{key:"render",value:function(){var e=this;return[l.a.createElement("div",{style:this.gameScorebarStyle()},l.a.createElement("div",{key:1,style:{color:"white",justifyContent:"center",marginLeft:"10px"}},"Level: ",this.state.gameState.level),">",l.a.createElement("div",{key:2,style:{color:"white",justifyContent:"center"}},"Score: ",this.state.gameState.score),">"),l.a.createElement("div",{style:this.gameFieldStyle()},this.state.blocks?this.state.blocks.map(function(t,i){return l.a.createElement("div",{key:i,style:e.positionStyle(t)})}):null,this.state.paddle?l.a.createElement("div",{style:this.positionStyle(this.state.paddle)}):null,this.state.ball?l.a.createElement("div",{style:this.ballStyle(this.state.ball)}):null,"ended"===this.state.gameState.gameMode?l.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"}},l.a.createElement("p",{style:{alignSelf:"center",color:"white"}},"Game over"),l.a.createElement("button",{onClick:this.onPlayAgain,style:{alignSelf:"center"}},"Play again")):null)]}}]),t}(l.a.Component);c.a.render(l.a.createElement(Z,null),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.f42dddb6.chunk.js.map