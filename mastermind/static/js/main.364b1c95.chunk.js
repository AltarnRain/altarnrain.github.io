(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,o){e.exports=o(18)},17:function(e,t,o){},18:function(e,t,o){"use strict";o.r(t);var n=o(0),i=o.n(n),r=o(8),a=o.n(r),l=(o(17),o(2)),s=o(3),c=o(5),u=o(4),h=o(6),d=o(7),p=o(1),m=["orange","yellow","blue","green","cyan","purple"],f=function(e){function t(e){var o;return Object(l.a)(this,t),(o=Object(c.a)(this,Object(u.a)(t).call(this,e))).onClick=o.onClick.bind(Object(p.a)(o)),o}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{style:{display:"flex",flexDirection:"row",backgroundColor:"white",height:"100%",justifyContent:"space-evenly"}},m.map(function(t,o){return i.a.createElement("div",{id:"modal",key:o,onClick:e.onClick,style:{height:"100%",width:"100%",backgroundColor:t}})}))}},{key:"onClick",value:function(e){var t=e.target;this.props.onPickColor&&this.props.onPickColor(t.style.backgroundColor)}}]),t}(i.a.Component),C=function(e){function t(e){var o;return Object(l.a)(this,t),(o=Object(c.a)(this,Object(u.a)(t).call(this,e))).portalAnchor=void 0,o.modalRoot=void 0,o.portalAnchor=document.createElement("div"),o.modalRoot=document.getElementById("portalRoot"),o.onClick=o.onClick.bind(Object(p.a)(o)),o}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.modalRoot&&this.modalRoot.appendChild(this.portalAnchor),document.addEventListener("mousedown",this.onClick)}},{key:"componentWillUnmount",value:function(){this.modalRoot&&this.modalRoot.removeChild(this.portalAnchor),document.removeEventListener("mousedown",this.onClick)}},{key:"render",value:function(){var e=0,t=0,o=0,n=0;if(this.props.element.current){var r=this.props.element.current.getBoundingClientRect();if(e=r.left,t=r.bottom,o=r.width,n=r.height,"undefined"!==typeof this.props.widthMultiplier&&(o*=this.props.widthMultiplier),"undefined"!==typeof this.props.heightMultiplier&&(n*=this.props.heightMultiplier),this.props.position,"center"===this.props.position&&(e=e+r.width/2-o/2),this.props.workAreaRef&&this.props.workAreaRef.current){var l=this.props.workAreaRef.current.getBoundingClientRect();e<l.left&&(e=l.left)}}var s={position:"absolute",display:"flex",left:e,top:t,height:n,width:o,flexDirection:"column",boxSizing:"border-box"};return a.a.createPortal(i.a.createElement("div",{style:s},this.props.children),this.portalAnchor)}},{key:"onClick",value:function(e){if(this.modalRoot&&this.props.onUserClickedOutside){var t=e.target;t&&"modal"!==t.id&&this.props.onUserClickedOutside()}}}]),t}(i.a.Component),b=function(e){function t(e){var o;return Object(l.a)(this,t),(o=Object(c.a)(this,Object(u.a)(t).call(this,e))).buttonRef=i.a.createRef(),o.state={showColorPicker:!1},o.onClick=o.onClick.bind(Object(p.a)(o)),o.onPickColor=o.onPickColor.bind(Object(p.a)(o)),o.onCloseColorPicker=o.onCloseColorPicker.bind(Object(p.a)(o)),o}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e={display:"flex",borderRadius:"50%",color:this.props.color,backgroundColor:this.props.color,flexGrow:0,width:"100%",height:"100%"};return i.a.createElement(i.a.Fragment,null,i.a.createElement("button",{ref:this.buttonRef,onClick:this.onClick,style:e}),this.state.showColorPicker?i.a.createElement(C,{position:"center",element:this.buttonRef,widthMultiplier:4.5,heightMultiplier:.7,onUserClickedOutside:this.onCloseColorPicker,workAreaRef:this.props.gameDivRef},i.a.createElement(f,{onPickColor:this.onPickColor})):null)}},{key:"onCloseColorPicker",value:function(){this.setState({showColorPicker:!1})}},{key:"onClick",value:function(){this.props.enabled&&this.setState({showColorPicker:!0})}},{key:"onPickColor",value:function(e){this.setState({showColorPicker:!1}),this.props.onSetColor&&this.props.onSetColor(this.props.pinNumber,e)}}]),t}(i.a.Component);function g(e){for(var t=Object(d.a)(e),o=0;o<10;o++){var n=Math.floor(4*Math.random()),i=Math.floor(4*Math.random()),r=t[n],a=t[i];"undefined"!==typeof r&&"undefined"!==typeof a&&(t[n]=a,t[i]=r)}return t}var v=function(e){function t(e){var o;return Object(l.a)(this,t),(o=Object(c.a)(this,Object(u.a)(t).call(this,e))).onClose=o.onClose.bind(Object(p.a)(o)),o.onEndGame=o.onEndGame.bind(Object(p.a)(o)),o.onCodeToConsole=o.onCodeToConsole.bind(Object(p.a)(o)),o}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e={margin:"5%",width:"100%"};return i.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},i.a.createElement("p",null,"Menu"),i.a.createElement("button",{style:e,onClick:this.onEndGame},"Give up"),i.a.createElement("button",{style:e,onClick:this.onReportIssue},"Report issue"),i.a.createElement("button",{style:e,onClick:this.onCodeToConsole},"Show code in console"),i.a.createElement("button",{style:e,onClick:this.onClose},"Close"))}},{key:"onClose",value:function(){this.props.onClose&&this.props.onClose()}},{key:"onEndGame",value:function(){this.props.onEndGame&&this.props.onEndGame()}},{key:"onReportIssue",value:function(){window.open("https://github.com/AltarnRain/mastermind/issues/new")}},{key:"onCodeToConsole",value:function(){this.props.onCodeToConsole&&this.props.onCodeToConsole()}}]),t}(i.a.Component),k=o(10),y=function(e){function t(e){var o;return Object(l.a)(this,t),(o=Object(c.a)(this,Object(u.a)(t).call(this,e))).onSetColor=o.onSetColor.bind(Object(p.a)(o)),o}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t={flexDirection:"row",display:"flex",backgroundColor:"undefined"!==typeof this.props.current?this.props.current?"blue":"brown":void 0,height:"8%"},o={width:"80%",height:"65%",marginTop:"6%",marginRight:"2%"};return i.a.createElement("div",{style:t},this.props.pinColors.map(function(t,o){return i.a.createElement("div",{key:o,style:{display:"flex",width:"14%",height:"88%",marginTop:"1%"}},i.a.createElement(b,{enabled:e.props.current,pinNumber:o,color:t,gameDivRef:e.props.gameDivRef,onSetColor:e.onSetColor}))}),i.a.createElement("div",{style:{display:"flex",justifyContent:"right",height:"100%",flexGrow:1}},"undefined"!==typeof this.props.hintColors?this.props.hintColors.map(function(e,t){return i.a.createElement("div",{key:t,style:Object(k.a)({},o,{backgroundColor:e})})}):null))}},{key:"onSetColor",value:function(e,t){this.props.onSetColor&&"undefined"!==typeof this.props.row&&this.props.onSetColor(this.props.row,e,t)}}]),t}(i.a.Component),w=function(e){function t(e){var o;return Object(l.a)(this,t),(o=Object(c.a)(this,Object(u.a)(t).call(this,e))).gameDivRef=i.a.createRef(),o.state=o.getInitialState(),o.onMoveDone=o.onMoveDone.bind(Object(p.a)(o)),o.onSetColor=o.onSetColor.bind(Object(p.a)(o)),o.onResetBoard=o.onResetBoard.bind(Object(p.a)(o)),o.onShowMenu=o.onShowMenu.bind(Object(p.a)(o)),o.onHideMenu=o.onHideMenu.bind(Object(p.a)(o)),o.onEndGame=o.onEndGame.bind(Object(p.a)(o)),o.onCodeToConsole=o.onCodeToConsole.bind(Object(p.a)(o)),o}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t={display:"flex",flexDirection:"row",justifyContent:"center",height:"90%",width:"100%"},o={display:"flex",fontSize:28,marginBottom:10,marginTop:50,textAlign:"center",height:"100%",flexDirection:"column"},n={margin:"5%",height:"8%",fontSize:"24px",fontWeight:"bold",borderRadius:"50%"},r={display:"flex",flexDirection:"row",justifyContent:"center",width:"50vh",height:"12%"};return i.a.createElement("div",{style:t},i.a.createElement(i.a.Fragment,null,this.state.showMenu?i.a.createElement(v,{onClose:this.onHideMenu,onEndGame:this.onEndGame,onCodeToConsole:this.onCodeToConsole}):i.a.createElement("div",{ref:this.gameDivRef,style:{backgroundColor:"brown",flexShrink:0,flexDirection:"column",width:"50vh"}},i.a.createElement("button",{style:{position:"absolute",left:0,top:0},onClick:this.onShowMenu},"Menu"),this.state.gameRows.map(function(t,o){return i.a.createElement(y,{key:o,current:e.state.currentRow===o,row:o,pinColors:t.pinColors,hintColors:t.hintColors,onSetColor:e.onSetColor,gameDivRef:e.gameDivRef})}),this.state.gameLost?i.a.createElement("div",{style:o},i.a.createElement("p",null,"You lost the game. The code was..."),i.a.createElement("br",null),i.a.createElement("div",{style:r},i.a.createElement(b,{enabled:!1,pinNumber:0,color:this.state.codeColors[0]}),i.a.createElement(b,{enabled:!1,pinNumber:1,color:this.state.codeColors[1]}),i.a.createElement(b,{enabled:!1,pinNumber:2,color:this.state.codeColors[2]}),i.a.createElement(b,{enabled:!1,pinNumber:3,color:this.state.codeColors[3]})),i.a.createElement("button",{style:n,onClick:this.onResetBoard},"Play again?")):this.state.gameWon?i.a.createElement("div",{style:o},i.a.createElement("p",null,"You found the code!"),i.a.createElement("div",{style:r},i.a.createElement(b,{enabled:!1,pinNumber:0,color:this.state.codeColors[0]}),i.a.createElement(b,{enabled:!1,pinNumber:1,color:this.state.codeColors[1]}),i.a.createElement(b,{enabled:!1,pinNumber:2,color:this.state.codeColors[2]}),i.a.createElement(b,{enabled:!1,pinNumber:3,color:this.state.codeColors[3]})),i.a.createElement("p",null,"Congratulations!"),i.a.createElement("button",{style:n,onClick:this.onResetBoard},"Play again?")):null,i.a.createElement("div",{style:t},this.allColorsSet()&&!1===this.state.gameWon&&!1===this.state.gameLost?i.a.createElement("button",{style:{display:"flex-inline",borderRadius:"40%",width:"50%",height:"3%",backgroundColor:"gray",border:"1%",margin:"1%",fontWeight:"bold",alignItems:"center"},onClick:this.onMoveDone},"Done!"):null))))}},{key:"getGameEmptyRows",value:function(){for(var e=[],t=0;t<12;t++)e.push({hintColors:["black","black","black","black"],pinColors:["black","black","black","black"]});return e}},{key:"getCode",value:function(){for(var e=[],t=0;t<4;t++){var o=Math.floor(6*Math.random());e.push(m[o])}return e}},{key:"onMoveDone",value:function(){if(!this.state.gameWon&&!this.state.gameLost){var e=this.cloneGameRows(),t=e[this.state.currentRow],o=function(e,t){for(var o=e.map(function(e,t){return{index:t,color:e,processed:!1}}),n=t.map(function(e,t){return{index:t,color:e,processed:!1}}),i={rightColorWrongPosition:0,rightColorRightPosition:0},r=function(e){var t=o[e],r=n.find(function(t){return t.index===e});r&&!1===r.processed&&t.color===r.color&&(i.rightColorRightPosition++,r.processed=!0,t.processed=!0)},a=0;a<o.length;a++)r(a);for(a=0;a<o.length;a++)!1===o[a].processed&&function(){var e=o[a].color,t=n.find(function(t){return t.color===e&&!1===t.processed});t&&!1===t.processed&&(i.rightColorWrongPosition++,t.processed=!0)}();return i}(t.pinColors,this.state.codeColors);if(4!==o.rightColorRightPosition)if(11!==this.state.currentRow||4===o.rightColorRightPosition){for(var n=[],i=[],r=0;r<o.rightColorRightPosition;r++)n.push("red");for(var a=0;a<o.rightColorWrongPosition;a++)i.push("white");for(var l=4-(o.rightColorRightPosition+o.rightColorWrongPosition),s=[].concat(Object(d.a)(g(n)),Object(d.a)(g(i))),c=0;c<l;c++)s.push("black");t.hintColors=s,this.setState({currentRow:this.state.currentRow+1,gameRows:e})}else this.onGameLost();else this.onGameWon()}}},{key:"onSetColor",value:function(e,t,o){var n=this.cloneGameRows();n[e].pinColors[t]=o,this.setState({gameRows:n})}},{key:"onResetBoard",value:function(){this.setState(this.getInitialState)}},{key:"getInitialState",value:function(){return{currentRow:0,gameRows:this.getGameEmptyRows(),codeColors:this.getCode(),gameLost:!1,gameWon:!1,showMenu:!1}}},{key:"cloneGameRows",value:function(){for(var e=Object(d.a)(this.state.gameRows),t=0;t<e.length;t++)e[t].pinColors=Object(d.a)(this.state.gameRows[t].pinColors),e[t].hintColors=Object(d.a)(this.state.gameRows[t].hintColors);return e}},{key:"allColorsSet",value:function(){return 0===this.state.gameRows[this.state.currentRow].pinColors.filter(function(e){return"black"===e}).length}},{key:"onHideMenu",value:function(){this.setState({showMenu:!1})}},{key:"onShowMenu",value:function(){this.setState({showMenu:!0})}},{key:"onEndGame",value:function(){var e=this;this.setState({showMenu:!1},function(){return e.onGameLost()})}},{key:"onGameWon",value:function(){this.setState({gameWon:!0},function(){return window.scrollTo(0,document.body.scrollHeight)})}},{key:"onGameLost",value:function(){this.setState({gameLost:!0},function(){return window.scrollTo(0,document.body.scrollHeight)})}},{key:"onCodeToConsole",value:function(){console.log(this.state.codeColors)}}]),t}(i.a.Component),E=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{style:{height:"100vh",textAlign:"center"}},i.a.createElement("p",{style:{fontSize:28,marginBottom:10,textAlign:"center"}},"Mastermind"),i.a.createElement(w,null))}}]),t}(i.a.Component);a.a.render(i.a.createElement(E,null),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.364b1c95.chunk.js.map